<!DOCTYPE html>
<html lang="zh-TW">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>å·¥ä½œç¶“æ­· - å±¥æ­·ç³»çµ±</title>
    <link rel="stylesheet" href="./styles/base.css">
    <link rel="stylesheet" href="./styles/login-screen.css">
    <link rel="stylesheet" href="./styles/navigation.css">
    <link rel="stylesheet" href="./styles/work-experience-table.css">
    <link rel="stylesheet" href="./styles/work-experience-modal.css">
    <link rel="stylesheet" href="./styles/work-experience.css">
</head>

<body>
    <div id="loginScreen"></div>
    <!-- å°è¦½æ¬„ -->
    <nav id="navigation"></nav>

    <!-- ä¸»å…§å®¹å€åŸŸ -->
    <main>
        <div id="work-experience-table"></div>
        <div id="loading" class="loading hidden">
            <span class="loading-spinner"></span>
            <span id="loading-text">æ­£åœ¨è¼‰å…¥å·¥ä½œç¶“æ­·è³‡æ–™...</span>
        </div>
        <div id="error-container"></div>
    </main>

    <!-- æ¨¡æ…‹æ¡†å®¹å™¨ -->
    <div id="modal-container"></div>

    <!-- é è…³ -->
    <footer>
        <p>Â© 2025 å±¥æ­·ç³»çµ±. ç‰ˆæœ¬ 1.0 | æœ€å¾Œæ›´æ–°: <span id="last-updated">2025-11-09</span></p>
        <p><a href="index.html">è¿”å›é¦–é </a> | <a href="portfolio.html">æª¢è¦–ä½œå“é›†</a></p>
    </footer>

    <!-- è¼‰å…¥æ‡‰ç”¨ç¨‹å¼ -->
    <script type="module">
        import { WorkExperienceService } from './services/WorkExperienceService.js';
        import { LanguageManager } from './i18n/LanguageManager.js';
        import { BackToTopButton } from './components/BackToTopButton.js';

        /**
         * åˆå§‹åŒ–æ‡‰ç”¨ç¨‹å¼
         */
        async function initializeApp() {
            console.log('ğŸš€ åˆå§‹åŒ–å·¥ä½œç¶“æ­·é é¢...');

            try {
                // 1. åˆå§‹åŒ–èªè¨€ç®¡ç†å™¨ï¼ˆè‡ªå‹•å¾ URL æˆ– localStorage è®€å–ï¼‰
                const language = LanguageManager.initialize();
                console.log(`ğŸ“ æª¢æ¸¬åˆ°èªè¨€: ${language}`);

                // 2. åˆå§‹åŒ–æ‡‰ç”¨ç‹€æ…‹å’ŒåŠ è¼‰è³‡æ–™
                await WorkExperienceService.initializeApp(language);

                // åˆå§‹åŒ–å›åˆ°æœ€ä¸Šæ–¹æŒ‰éˆ•
                BackToTopButton.initialize();

                console.log('âœ… å·¥ä½œç¶“æ­·é é¢åˆå§‹åŒ–å®Œæˆ');
            } catch (error) {
                console.error('âŒ æ‡‰ç”¨ç¨‹å¼åˆå§‹åŒ–å¤±æ•—:', error);
                const errorContainer = document.getElementById('error-container');
                if (errorContainer) {
                    errorContainer.innerHTML = `
                        <div class="error">
                            <div class="error-title">âŒ æ‡‰ç”¨ç¨‹å¼åˆå§‹åŒ–å¤±æ•—</div>
                            <p>${error.message}</p>
                        </div>
                    `;
                }
            }
        }

        // DOMContentLoaded æ™‚åˆå§‹åŒ–æ‡‰ç”¨
        document.addEventListener('DOMContentLoaded', initializeApp);
    </script>
</body>

</html>