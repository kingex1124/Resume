<!DOCTYPE html>
<html lang="zh-TW">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>工作經歷 - 履歷系統</title>
    <link rel="stylesheet" href="./styles/base.css">
    <link rel="stylesheet" href="./styles/login-screen.css">
    <link rel="stylesheet" href="./styles/navigation.css">
    <link rel="stylesheet" href="./styles/work-experience-table.css">
    <link rel="stylesheet" href="./styles/work-experience-modal.css">
    <link rel="stylesheet" href="./styles/work-experience.css">
</head>

<body>
    <div id="loginScreen" class="hidden"></div>
    <!-- 導覽欄 -->
    <nav id="navigation"></nav>

    <!-- 主內容區域 -->
    <main>
        <div id="work-experience-table"></div>
        <div id="loading" class="loading hidden">
            <span class="loading-spinner"></span>
            <span id="loading-text">正在載入工作經歷資料...</span>
        </div>
        <div id="error-container"></div>
    </main>

    <!-- 模態框容器 -->
    <div id="modal-container"></div>

    <!-- 頁腳 -->
    <footer>
        <p>© 2025 履歷系統. 版本 1.0 | 最後更新: <span id="last-updated">2025-11-09</span></p>
        <p><a href="index.html">返回首頁</a> | <a href="portfolio.html">檢視作品集</a></p>
    </footer>

    <!-- 載入應用程式 -->
    <script type="module">
        import { WorkExperienceService } from './services/WorkExperienceService.js';
        import { LanguageManager } from './i18n/LanguageManager.js';
        import { BackToTopButton } from './components/BackToTopButton.js';

        /**
         * 初始化應用程式
         */
        async function initializeApp() {
            try {
                // 1. 初始化語言管理器（自動從 URL 或 localStorage 讀取）
                const language = LanguageManager.initialize();

                // 2. 初始化應用狀態和加載資料
                await WorkExperienceService.initializeApp(language);

                // 初始化回到最上方按鈕
                BackToTopButton.initialize();
            } catch (error) {
                console.error('❌ 應用程式初始化失敗:', error);
                const errorContainer = document.getElementById('error-container');
                if (errorContainer) {
                    errorContainer.innerHTML = `
                        <div class="error">
                            <div class="error-title">❌ 應用程式初始化失敗</div>
                            <p>${error.message}</p>
                        </div>
                    `;
                }
            }
        }

        // DOMContentLoaded 時初始化應用
        document.addEventListener('DOMContentLoaded', initializeApp);
    </script>
</body>

</html>